services:
  - type: web
    name: hitchbuddy
    env: node
    plan: free
    buildCommand: |
      npm install
      mkdir -p dist/public
      chmod +x build-client.sh deploy-server.cjs 2>/dev/null || true
      echo "Build directories created and permissions set"
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: FORCE_DEV_MODE
        value: 'false'
      - key: PORT
        value: '10000'
    healthCheckPath: /health
    autoDeploy: false